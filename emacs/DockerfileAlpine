# TODO: ban root account logging
FROM alpine as mybasenonroot

# XAUTH ENV
ENV DISP :1
ENV TOK mytoken

ARG APP_NAME
ARG MY_USER
ARG MY_GROUP
ARG MY_UID
ARG MY_GID
ENV DEBUG_MODE=false
WORKDIR /home/$MY_USER/

## Create non-root user
RUN addgroup -g $MY_GID $MY_GROUP && \
	adduser -u $MY_UID $MY_USER -G $MY_GROUP -D && \
	adduser $MY_USER audio && \
	apk update && apk upgrade


FROM mybasenonroot as baseemacs
RUN apk add emacs \
	git \
	vifm \
	vim \
  dbus-x11 \
  mesa-gl \
  mesa-dri-swrast

USER  $MY_USER
WORKDIR "/home/$MY_USER"
