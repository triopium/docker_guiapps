# TODO: ban root account logging
FROM ubuntu:latest as base

# ADD APPS
RUN apt-get -y update \
	&& DEBIAN_FRONTEND=noninteractive \
	apt-get -y  \
	--no-install-recommends \
	install \
	ca-certificates \
	xauth \
	emacs \
	vifm \
	git-all

# USER CREATE
FROM base as userspec
ARG MY_USER
ARG MY_GROUP
ARG MY_UID
ARG MY_GID
RUN useradd -m -s /bin/bash -u $MY_UID $MY_USER
WORKDIR "/home/$MY_USER"
ADD  ./emacs.d/ ./.emacs.d/
RUN chown -R "$MY_USER":"$MY_GROUP" ./.emacs.d/
# --chown=myuser:mygroup 

# MODIFY USER
USER  $MY_USER


## FOLLOWING DEPRECATED
# ENV DISP :1
# ENV XTOK mytoken
# RUN  touch .Xauthority \
	# && xauth add $DISP . $XTOK
# ENTRYPOINT  touch .Xauthority \
	# && xauth add $DISP . $XTOK
